@page "/master-detail-form"

@using VxFormGenerator.Core
@using VxFormGenerator.Core.Layout
@using VxFormGeneratorDemoData
@using System.Text.Json;
@using System.Runtime.CompilerServices


<h1>Static model demo for Invoice with master-details</h1>

<div class="card">
    <div class="card-header">
        Generated by Static model form Invoice
    </div>

    <div class="card-body">
        <EditForm Model="Model"
                  OnValidSubmit="HandleValidSubmit"
                  OnInvalidSubmit="HandleInValidSubmit">
            <VxFormGenerator.Core.Validation.ObjectGraphDataAnnotationsValidator/>

            <RenderFormElements FormLayoutOptions="@LayoutOptions"></RenderFormElements>

            <button class="btn btn-primary" type="submit">Submit</button>
            <button class="btn btn-primary" type="button" id="FormOneJson" @onclick="SerializeToJson">Serialize to Json</button>
        </EditForm>
    </div>
</div>


<div class="alert alert-info">
    @SerializedModelView
</div>

<br/>

@code{

    /// <summary>
    /// Model that is used for the form
    /// </summary>
    private string SerializedModelView = "";
    private object Model = new Invoice();

    private VxFormLayoutOptions LayoutOptions = new VxFormLayoutOptions { LabelOrientation = LabelOrientation.LEFT };


    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    /// <summary>
    /// Will handle the submit action of the form
    /// </summary>
    /// <param name="context">The model with values as entered in the form</param>
    private void HandleValidSubmit(EditContext context)
    {
        // save your changes
    }
    


    
    private void HandleInValidSubmit(EditContext context)
    {
    }
    
    
    
    private void SerializeToJson()
    {
        SerializedModelView = JsonSerializer.Serialize(Model);
    }



}